# VPN环境快速启动指南

## 🚀 问题解决

**问题**：两台设备都在同一WiFi下，但都挂了VPN，如何连接？

**解决方案**：使用智能启动器，自动处理VPN环境！

## 📱 快速使用

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 主设备启动
```bash
cd EEG
python smart_host_main.py
```

**智能功能**：
- 🔍 自动检测网络环境
- 🌐 显示所有可用IP地址
- 🎯 推荐最佳连接方案
- 📡 自动启动服务

### 3. 客户端启动
```bash
cd EEG  
python smart_client_main.py
```

**智能功能**：
- 🔍 自动扫描主设备服务
- ✅ 验证服务可用性
- 🔗 智能连接配置
- 💓 实时连接监控

## 🔧 VPN环境方案选择

### 方案1: 局域网直连 ⭐ 推荐
```
✅ 适用情况：两台设备在同一WiFi网络
✅ 优点：速度快、延迟低、稳定
✅ 操作：选择"使用局域网直连"
```

### 方案2: VPN网络连接
```
🔒 适用情况：需要通过VPN连接
🔒 优点：安全性高
🔒 操作：使用VPN分配的IP地址
```

### 方案3: 手机热点
```
📱 适用情况：网络环境复杂
📱 优点：独立网络，简单可靠
📱 操作：开启热点，两台设备连接
```

## 🎯 典型使用场景

### 场景1: 家庭网络 + 商业VPN
```
设备：两台Mac/PC，同一WiFi，都开启VPN
方案：选择"局域网直连"
结果：绕过VPN，使用192.168.x.x直连
```

### 场景2: 企业网络 + 内网VPN
```
设备：办公网络，通过VPN连接
方案：选择"VPN网络连接"
结果：使用VPN分配的IP通信
```

### 场景3: 复杂网络环境
```
设备：网络配置复杂，连接困难
方案：选择"手机热点"
结果：创建独立网络，稳定连接
```

## 🛠️ 手动模式

如果智能启动器无法满足需求，可以使用传统模式：

### 主设备
```bash
python host_main.py
```

### 客户端
```bash
python client_main.py
```

## 🔍 故障排除

### 1. 无法自动发现主设备
```bash
# 检查网络连接
ping <主设备IP>

# 检查端口开放
telnet <主设备IP> 8080

# 手动输入IP地址
```

### 2. VPN干扰连接
```bash
# 临时关闭VPN测试
# 或选择"局域网直连"绕过VPN
```

### 3. 防火墙阻拦
```bash
# macOS
sudo ufw allow 8080

# Windows
# 在防火墙设置中允许8080端口
```

## 🌟 高级功能

### 网络诊断工具
```bash
python network_utils.py
```

**功能**：
- 显示所有网络接口
- 检测VPN状态
- 扫描局域网服务
- 连接方案推荐

### 服务测试
```bash
python test_social_system.py
```

**功能**：
- 验证服务完整性
- 测试API接口
- 网络连接检查

## 📞 技术支持

**常见问题**：
1. 🔍 自动发现失败 → 手动输入IP
2. 🔒 VPN阻止连接 → 选择局域网直连
3. 📱 网络复杂 → 使用手机热点
4. 🛠️ 端口被占用 → 更换端口或关闭冲突服务

**成功标志**：
- ✅ 主设备显示客户端IP
- ✅ 客户端显示连接成功
- ✅ 情绪数据实时传输
- ✅ 音乐根据情绪变化

---

**开始你的VPN环境社交脑电音乐之旅！** 🎵🔒🧠 